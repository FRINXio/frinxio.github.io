<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     contentScriptType="application/ecmascript" contentStyleType="text/css" height="624px" preserveAspectRatio="none"
     style="width:720px;height:624px;background:#FFFFFF;" version="1.1" viewBox="0 0 720 624" width="720px"
     zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="f1epfegjtzxmjw" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="155" x="282.5"
              y="28.708">RPC query-config
        </text>
        <rect fill="#FFFFFF" filter="url(#f1epfegjtzxmjw)" height="397.5313" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="347" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1epfegjtzxmjw)" height="46.2656" style="stroke:#000000;stroke-width:2.0;"
              width="395.5" x="10" y="242.7813"/>
        <rect fill="#FFFFFF" filter="url(#f1epfegjtzxmjw)" height="148.4688" style="stroke:#000000;stroke-width:2.0;"
              width="621.5" x="10" y="374.3125"/>
        <rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1.0;" width="621.5" x="10" y="449.7109"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="123.25"
              y2="539.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="351.5" x2="351.5" y1="123.25"
              y2="539.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="577.5" x2="577.5" y1="123.25"
              y2="539.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="20"
              y="119.9482">Application
        </text>
        <ellipse cx="63" cy="49.9531" fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" rx="8" ry="8"
                 style="stroke:#A80036;stroke-width:2.0;"/>
        <path d="M63,57.9531 L63,84.9531 M50,65.9531 L76,65.9531 M63,84.9531 L50,99.9531 M63,84.9531 L76,99.9531 "
              fill="none" filter="url(#f1epfegjtzxmjw)" style="stroke:#A80036;stroke-width:2.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="20"
              y="551.7764">Application
        </text>
        <ellipse cx="63" cy="565.0781" fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" rx="8" ry="8"
                 style="stroke:#A80036;stroke-width:2.0;"/>
        <path d="M63,573.0781 L63,600.0781 M50,581.0781 L76,581.0781 M63,600.0781 L50,615.0781 M63,600.0781 L76,615.0781 "
              fill="none" filter="url(#f1epfegjtzxmjw)" style="stroke:#A80036;stroke-width:2.0;"/>
        <rect fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="83" x="308.5" y="87.9531"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="315.5"
              y="107.9482">UniConfig
        </text>
        <rect fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="83" x="308.5" y="538.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="315.5"
              y="558.7764">UniConfig
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="534.5"
              y="119.9482">PostgreSQL
        </text>
        <path d="M560,70.9531 C560,60.9531 578,60.9531 578,60.9531 C578,60.9531 596,60.9531 596,70.9531 L596,96.9531 C596,106.9531 578,106.9531 578,106.9531 C578,106.9531 560,106.9531 560,96.9531 L560,70.9531 "
              fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M560,70.9531 C560,80.9531 578,80.9531 578,80.9531 C578,80.9531 596,80.9531 596,70.9531 " fill="none"
              style="stroke:#000000;stroke-width:1.5;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="534.5"
              y="551.7764">PostgreSQL
        </text>
        <path d="M560,565.0781 C560,555.0781 578,555.0781 578,555.0781 C578,555.0781 596,555.0781 596,565.0781 L596,591.0781 C596,601.0781 578,601.0781 578,601.0781 C578,601.0781 560,601.0781 560,591.0781 L560,565.0781 "
              fill="#FEFECE" filter="url(#f1epfegjtzxmjw)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M560,565.0781 C560,575.0781 578,575.0781 578,575.0781 C578,575.0781 596,575.0781 596,565.0781 "
              fill="none" style="stroke:#000000;stroke-width:1.5;"/>
        <rect fill="#FFFFFF" filter="url(#f1epfegjtzxmjw)" height="397.5313" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="347" y="133.25"/>
        <polygon fill="#A80036" points="335,165.5156,345,169.5156,335,173.5156,339,169.5156"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="341" y1="169.5156" y2="169.5156"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="70"
              y="149.3169">execute RPC 'query-config'
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="70"
              y="164.4497">(topology-id, node-id, jsonb-path-query)
        </text>
        <polygon fill="#A80036" points="566,194.6484,576,198.6484,566,202.6484,570,198.6484"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="572" y1="198.6484" y2="198.6484"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="364"
              y="193.5825">find node (node-id)
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="227.7813" y2="223.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="227.7813" y2="231.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="577" y1="227.7813"
              y2="227.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="374"
              y="222.7153">node metadata
        </text>
        <path d="M10,242.7813 L79,242.7813 L79,249.7813 L69,259.7813 L10,259.7813 L10,242.7813 " fill="#EEEEEE"
              style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="395.5" x="10" y="242.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="24" x="25" y="255.8481">opt
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="134" x="94" y="254.9917">[node does not exist]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="281.0469" y2="277.0469"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="281.0469" y2="285.0469"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="346" y1="281.0469"
              y2="281.0469"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="80"
              y="275.981">error: node doesn't exist
        </text>
        <polygon fill="#A80036" points="566,313.1797,576,317.1797,566,321.1797,570,317.1797"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="572" y1="317.1797" y2="317.1797"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="364"
              y="312.1138">send query (jsonb-path-query)
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="578" x2="620" y1="346.3125" y2="346.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="620" x2="620" y1="346.3125" y2="359.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="579" x2="620" y1="359.3125" y2="359.3125"/>
        <polygon fill="#A80036" points="589,355.3125,579,359.3125,589,363.3125,585,359.3125"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="585"
              y="341.2466">filtering &amp; selection
        </text>
        <path d="M10,374.3125 L74,374.3125 L74,381.3125 L64,391.3125 L10,391.3125 L10,374.3125 " fill="#EEEEEE"
              style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:2.0;" width="621.5" x="10" y="374.3125"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="19" x="25" y="387.3794">alt
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="187" x="89" y="386.5229">[successfully executed query]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="412.5781" y2="408.5781"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="412.5781" y2="416.5781"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="577" y1="412.5781"
              y2="412.5781"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="374"
              y="407.5122">JSON entries
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="441.7109" y2="437.7109"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="441.7109" y2="445.7109"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="346" y1="441.7109"
              y2="441.7109"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="80"
              y="436.645">filtered configuration entries
        </text>
        <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="631.5" y1="450.7109"
              y2="450.7109"/>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="85" x="15" y="460.9214">[syntax error]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="485.6484" y2="481.6484"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="357" x2="367" y1="485.6484" y2="489.6484"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="577" y1="485.6484"
              y2="485.6484"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="374"
              y="480.5825">syntax error
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="514.7813" y2="510.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="63" x2="73" y1="514.7813" y2="518.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="346" y1="514.7813"
              y2="514.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="80"
              y="509.7153">error: syntax error
        </text><!--MD5=[2d99510ff76d2daa70169a3402348a4a]
@startuml
title "RPC query-config"

actor Application
participant UniConfig
database PostgreSQL

activate UniConfig

Application -> UniConfig: execute RPC 'query-config' \n(topology-id, node-id, jsonb-path-query)
UniConfig -> PostgreSQL: find node (node-id)
PostgreSQL - ->> UniConfig: node metadata

opt node does not exist
    UniConfig - ->> Application: error: node doesn't exist
end

UniConfig -> PostgreSQL: send query (jsonb-path-query)
PostgreSQL -> PostgreSQL: filtering & selection

alt successfully executed query
    PostgreSQL - ->> UniConfig: JSON entries
    UniConfig - ->> Application: filtered configuration entries
else syntax error
    PostgreSQL - ->> UniConfig: syntax error
    UniConfig - ->> Application: error: syntax error
end
@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>